# Web Crawler for Penetration Testing


## 项目简介

这是一个专门为渗透测试和CTF靶场设计的增强版网站爬虫工具。它能够高效地爬取目标网站的所有可访问路径，发现隐藏的目录和文件，是安全测试中信息收集阶段的重要工具。

## 功能特性

### 🚀 核心功能

- ​**智能链接提取**：从HTML、JavaScript和注释中提取所有链接
- ​**深度可控爬取**：可自定义爬取深度（默认3层）
- ​**多线程支持**：支持并发请求，提高爬取效率
- ​**靶场优化**：针对渗透测试环境优化，支持SSL证书忽略

### 🔍 发现能力

- 提取网页中的所有href、src、action属性链接
- 从JavaScript代码中发现隐藏的API端点
- 分析HTML注释中的潜在路径
- 智能过滤无效链接和外部资源

### 📊 结果输出

- ​**多种格式保存**：TXT、JSON、纯URL列表
- ​**详细统计信息**：HTTP状态码分布、响应时间、内容类型等
- ​**分类展示**：按管理后台、API接口、登录页面等分类显示结果
- ​**错误处理**：完善的异常处理和超时机制

## 快速开始

### 安装依赖

bash

```
pip install requests
```

### 基本使用

bash

```
# 爬取目标网站
python3 pc.py http://target.com

# 增加爬取深度和线程数
python3 pc.py http://target.com -d 5 -t 10

# 针对HTTPS网站，忽略SSL证书验证
python3 pc.py https://target.com --no-verify
```

### 命令行参数

text

```
必需参数:
  url                   目标URL (例如: http://example.com)

可选参数:
  -d, --depth DEPTH     爬取深度 (默认: 3)
  -t, --threads THREADS 并发线程数 (默认: 5)
  -w, --delay DELAY     请求延迟(秒) (默认: 0.2)
  --no-verify           跳过SSL证书验证
```

## 使用示例

### 示例1：基础扫描

bash

```
python3 pc.py http://10.129.17.192
```

这将以默认设置（深度3，线程5）扫描目标网站。

### 示例2：深度扫描

bash

```
python3 pc.py http://10.129.17.192 -d 5 -t 15 -w 0.1
```

- ​`-d 5`: 爬取5层深度
- ​`-t 15`: 使用15个并发线程
- ​`-w 0.1`: 每个请求延迟0.1秒

### 示例3：HTTPS网站扫描

bash

```
python3 pc.py https://vulnerable.site --no-verify -d 4
```

## 输出文件说明

脚本运行后会生成以下文件：

### 1. `crawl_results_[domain]_[timestamp].txt`

- 人类可读的格式
- 包含统计信息和URL列表
- 按HTTP状态码分组显示

### 2. `crawl_results_[domain]_[timestamp].json`

- 结构化数据
- 包含完整的响应信息
- 适合进一步自动化处理

### 3. `crawl_results_[domain]_[timestamp]_urls.txt`

- 纯URL列表
- 可直接用于其他工具输入

## 输出示例

text

```
============================================================
            增强版网站爬虫 - 安全测试专用
============================================================
[*] 开始爬取: http://10.129.17.192
[*] 最大深度: 4
[*] 线程数: 10
------------------------------------------------------------
[+] 初始连接成功: HTTP 200
[+] Content-Type: text/html; charset=UTF-8
[+] Content-Length: 15342 bytes
[+] 从初始页面发现 47 个链接
[+] 深度1 [200]: http://10.129.17.192/index.php
[+] 深度1 [200]: http://10.129.17.192/about.html
[!] 深度2 [403]: http://10.129.17.192/admin/
[+] 深度2 [200]: http://10.129.17.192/login.php
...

[*] 爬取完成!
[*] 耗时: 0:02:15.421533
[*] 总请求数: 147
[*] 成功请求: 132
[*] 失败请求: 15
[*] 发现URL总数: 132
------------------------------------------------------------
[*] HTTP状态码统计:
    200: 112
    403: 15
    404: 5
------------------------------------------------------------
[*] 发现的可访问URL:

  [+] 管理后台 (3):
      [200] http://10.129.17.192/admin/
      [403] http://10.129.17.192/admin/config/
      [200] http://10.129.17.192/admin/login.php

  [+] 登录页面 (2):
      [200] http://10.129.17.192/login.php
      [200] http://10.129.17.192/auth/login

  [+] API接口 (8):
      [200] http://10.129.17.192/api/v1/users
      [403] http://10.129.17.192/api/v1/admin
      ...
```

## 技术细节

### 爬取策略

1. ​**广度优先搜索**：按深度逐层爬取
2. ​**智能去重**：避免重复访问同一URL
3. ​**域名限制**：只爬取同一域名的链接
4. ​**文件过滤**：跳过图片、视频等静态资源

### 安全特性

- 请求延迟避免对目标造成压力
- 可配置的超时设置
- 完善的错误处理和日志记录
- 用户友好的中断处理（Ctrl+C）

### 性能优化

- 连接池复用
- 响应内容智能解析
- 内存效率优化
- 并行处理支持

## 使用场景

### 🎯 渗透测试

- 信息收集阶段发现网站结构
- 寻找隐藏的管理后台和API端点
- 识别潜在的攻击面

### 🏆 CTF比赛

- 快速枚举目标网站的所有路径
- 发现flag或隐藏的挑战入口
- 自动化信息收集

### 🔧 安全评估

- 网站目录结构审计
- 暴露资源的识别
- 安全配置检查

## 注意事项

### ⚠️ 合法使用

- 仅用于授权的安全测试
- 遵守目标网站的服务条款
- 获取明确授权后再进行测试

### ⚡ 性能考虑

- 适当调整线程数和延迟
- 避免对生产环境造成影响
- 注意本地资源消耗

### 🔒 隐私保护

- 不要在公共仓库泄露敏感目标
- 妥善处理爬取到的敏感信息
- 遵守数据保护法规

## 故障排除

### 常见问题

#### 1. 连接被拒绝

bash

```
# 检查目标是否可达
ping target.com
# 检查端口是否开放
nc -zv target.com 80
```

#### 2. SSL证书错误

bash

```
# 使用 --no-verify 参数
python3 pc.py https://target.com --no-verify
```

#### 3. 爬取结果为空

- 检查目标网站是否有反爬机制
- 尝试调整User-Agent
- 增加请求延迟

#### 4. 内存使用过高

- 减少爬取深度
- 降低线程数
- 使用更严格的过滤规则

## 开发计划

### 近期计划

- 添加代理支持
- 集成WAF绕过技术
- 添加自定义User-Agent列表
- 支持表单自动提交

### 长期计划

- 集成目录爆破功能
- 添加截图功能
- 支持分布式爬取
- 开发Web界面

## 贡献指南

欢迎提交Issue和Pull Request！

1. Fork本仓库
2. 创建功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启Pull Request

## 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](https://license/) 文件了解详情

## 免责声明

本工具仅用于授权的安全测试和教育目的。使用者需自行承担使用本工具所产生的所有责任。开发者不对任何误用或损害承担责任。

---

​**注意**：在进行任何安全测试前，请确保您已获得合法授权。未经授权的测试可能违反法律。

## Star History

如果觉得这个项目对你有帮助，请给个⭐️支持一下！
